# Velocity 模板和 JSP 页面

✦ 在这个项目中，Velocity 模板和 JSP 是同时存在的，它们不是互斥的关系，而是可以根据不同的需求选择使用。具体分析如
下：

1. 两种模板技术的共存方式

配置方式

- Velocity 模板：通过 web.xml 中的 VelocityViewServlet 配置，处理.vm 文件

```xml
    1   <servlet>
    2       <servlet-name>VelocityViewServlet</servlet-name>
    3       <servlet-class>org.apache.velocity.tools.view.VelocityViewServlet</servlet-class>
    4       <init-param>
    5           <param-name>org.apache.velocity.properties</param-name>
    6           <param-value>/WEB-INF/velocity.properties</param-value>
    7       </init-param>
    8   </servlet>
    9
   10   <servlet-mapping>
   11       <servlet-name>VelocityViewServlet</servlet-name>
   12       <url-pattern>*.vm</url-pattern>
   13   </servlet-mapping>
```

- JSP：通过标准的 Servlet 容器处理，处理.jsp 文件

文件结构

- Velocity 模板：存放在/WEB-INF/templates/目录下

  - 例如：/WEB-INF/templates/customer/list.vm
  - 使用布局模板：/WEB-INF/templates/layout.vm

- JSP 页面：存放在/WEB-INF/views/目录下
  - 例如：/WEB-INF/views/customer/list.jsp

2. 使用场景的区别

Velocity 模板的使用

- VelocityCustomerServlet：专门使用 Velocity 模板的控制器
  - 使用 VelocityUtil.renderTemplateToResponse()方法渲染模板
  - 通过 VelocityContext 传递数据
  - 适用于需要更灵活模板控制的场景

JSP 的使用

- CustomerServlet：使用 JSP 的标准控制器
  - 使用 RequestDispatcher.forward()方法转发到 JSP 页面
  - 通过 request.setAttribute()传递数据
  - 使用 JSTL 标签库处理数据展示
  - 适用于传统的 Java Web 开发场景

3. 两种技术的特点对比

Velocity 模板

- 优点：
  - 语法简洁，易于学习
  - 更好的安全性（限制 Java 代码执行）
  - 适合设计师使用
  - 模板继承机制（通过#parse 指令）
- 缺点：
  - 功能相对有限
  - 需要额外的配置

JSP

- 优点：
  - 功能强大，支持 Java 代码片段
  - 丰富的标签库（JSTL）
  - 广泛使用，社区支持好
- 缺点：
  - 容易在模板中混入业务逻辑
  - 语法相对复杂

4. 项目中的实际应用

这个项目采用了双模板引擎的策略：

- 传统功能：使用 JSP 实现，如 CustomerServlet 对应的 JSP 页面
- 新功能或特定需求：使用 Velocity 模板，如 VelocityCustomerServlet 对应的 VM 模板

这种设计允许开发团队根据具体需求选择最适合的模板技术，或者在项目不同阶段使用不同的技术，而不需要完全重写现有
代码。

总结：在这个项目中，Velocity 模板和 JSP 是同时存在的互补关系，不是互斥的替代关系。开发团队可以根据具体需求选
择使用哪种模板技术。

# # 老旧保险系统初学者开发流程书

本流程书为 Java 初学者提供详细的步骤指导，帮助您逐步完成老旧保险系统的开发和维护工作。

## 第一步：环境准备

### 1.1 安装 JDK 1.8

1. 访问 Oracle 官网下载 JDK 1.8
2. 运行安装程序，按默认设置安装
3. 配置环境变量：
   - 设置`JAVA_HOME`为 JDK 安装目录（如：C:\Program Files\Java\jdk1.8.0_202）
   - 将`%JAVA_HOME%\bin`添加到`PATH`环境变量中
4. 打开命令提示符，输入`java -version`验证安装是否成功

### 1.2 安装 Apache Tomcat 8

1. 访问 Apache Tomcat 官网下载 Tomcat 8
2. 解压到指定目录（如：C:\apache-tomcat-8.5.88）
3. 配置环境变量：
   - 设置`CATALINA_HOME`为 Tomcat 安装目录
4. 在命令提示符中进入 Tomcat 的 bin 目录，运行`startup.bat`启动服务器
5. 打开浏览器访问 http://localhost:8080，确认 Tomcat 正常运行

### 1.3 安装 MySQL 数据库

1. 访问 MySQL 官网下载 MySQL Community Server
2. 运行安装程序，选择"Server only"安装类型
3. 配置 root 用户密码（如：root123）
4. 启动 MySQL 服务
5. 使用命令行或 MySQL Workbench 连接数据库，确认安装成功

### 1.4 安装开发工具

1. 下载并安装 Eclipse IDE for Java EE Developers
2. 启动 Eclipse，配置工作空间目录

## 第二步：创建项目结构

### 2.1 在 Eclipse 中创建动态 Web 项目

1. 打开 Eclipse
2. 点击"File" -> "New" -> "Dynamic Web Project"
3. 输入项目名称（如：insurance-system）
4. 选择 Target runtime 为 Apache Tomcat v8.5
5. 点击"Next"直到完成向导

### 2.2 创建目录结构

在项目中创建以下目录：

```
insurance-system/
├── src/                       # Java源代码目录
├── WebContent/                # Web资源目录
│   ├── WEB-INF/
│   │   ├── web.xml            # Web配置文件
│   │   └── lib/               # 第三方库目录
│   ├── css/                   # 样式文件目录
│   ├── js/                    # JavaScript文件目录
│   ├── images/                # 图片资源目录
│   └── *.jsp                  # JSP页面文件
└── *.sql                      # 数据库脚本文件
```

## 第三步：数据库设计与初始化

### 3.1 创建数据库表

1. 打开 MySQL 命令行或 MySQL Workbench
2. 执行以下 SQL 创建数据库：
   ```sql
   CREATE DATABASE insurance_system DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
   USE insurance_system;
   ```
3. 创建必要的表（参考提供的 init_database.sql 文件）

### 3.2 插入初始数据

1. 编写 INSERT 语句为表添加测试数据
2. 执行 SQL 脚本初始化数据库

## 第四步：配置项目依赖

### 4.1 添加 JDBC 驱动

1. 下载 MySQL Connector/J（JDBC 驱动）
2. 将 jar 文件复制到项目的`WebContent/WEB-INF/lib/`目录
3. 在 Eclipse 中右键点击 jar 文件，选择"Add to Build Path"

### 4.2 添加 Velocity 库（如果使用）

1. 下载 Apache Velocity 库
2. 将相关 jar 文件添加到 lib 目录并加入构建路径

## 第五步：开发登录功能

### 5.1 创建登录页面(login.jsp)

1. 在 WebContent 目录下创建 login.jsp 文件
2. 编写 HTML 表单用于用户登录
3. 添加处理登录逻辑的 Java 代码段
4. 实现简单的用户名密码验证

### 5.2 创建首页(index.jsp)

1. 创建系统主页
2. 添加会话检查确保用户已登录
3. 设计简单的导航菜单

### 5.3 创建退出功能(logout.jsp)

1. 创建 logout.jsp 文件
2. 实现会话销毁功能
3. 重定向到登录页面

## 第六步：开发客户管理功能

### 6.1 创建客户列表页面

1. 创建 customer_list.jsp 文件
2. 在 Java 代码段中编写数据库查询逻辑
3. 使用 JDBC 连接数据库查询客户信息
4. 在 HTML 表格中展示查询结果

### 6.2 实现分页功能

1. 添加分页参数处理
2. 修改 SQL 查询语句添加 LIMIT 子句
3. 生成分页导航链接

### 6.3 添加搜索功能

1. 在页面中添加搜索表单
2. 处理搜索参数
3. 修改查询条件动态添加 WHERE 子句

## 第七步：开发保单管理功能

### 7.1 创建保单列表 Servlet

1. 在 src 目录下创建 PolicyListServlet.java
2. 继承 HttpServlet 类
3. 实现 doGet 和 doPost 方法
4. 编写数据库查询逻辑

### 7.2 创建 Velocity 模板

1. 创建 policy_list.vm 文件
2. 使用 Velocity 语法展示数据
3. 添加条件判断和循环语句

### 7.3 配置 Servlet 映射

1. 编辑 WEB-INF/web.xml 文件
2. 添加 servlet 和 servlet-mapping 配置
3. 设置 URL 映射规则

## 第八步：开发产品管理功能

### 8.1 创建产品列表 Servlet

1. 创建 ProductListServlet.java 文件
2. 实现产品查询逻辑
3. 将查询结果放入 request 属性

### 8.2 创建产品列表页面

1. 创建 product_list.jsp 文件
2. 从 request 中获取产品数据
3. 使用 JSP 标签展示数据

## 第九步：测试和调试

### 9.1 启动 Tomcat 服务器

1. 在 Eclipse 中配置 Tomcat 服务器
2. 启动服务器
3. 部署项目到服务器

### 9.2 功能测试

1. 访问登录页面，测试登录功能
2. 测试各个菜单项的跳转
3. 验证数据展示是否正确
4. 测试分页和搜索功能

### 9.3 调试常见问题

1. 解决中文乱码问题
2. 处理数据库连接异常
3. 修复空指针异常
4. 优化页面加载速度

## 第十步：部署和发布

### 10.1 导出 WAR 文件

1. 在 Eclipse 中右键点击项目
2. 选择"Export" -> "WAR file"
3. 指定导出路径和文件名

### 10.2 部署到 Tomcat

1. 将 WAR 文件复制到 Tomcat 的 webapps 目录
2. 启动 Tomcat 服务器
3. 访问部署的应用程序

## 常见问题和解决方案

### 1. 中文乱码问题

解决方案：

- 在 JSP 页面添加`<%@ page contentType="text/html;charset=UTF-8" language="java" %>`
- 在 HTML 中添加`<meta charset="UTF-8">`
- 在数据库连接 URL 中添加`?useUnicode=true&characterEncoding=utf8`

### 2. 数据库连接问题

解决方案：

- 确认 MySQL 服务已启动
- 检查数据库连接参数（URL、用户名、密码）
- 确认 MySQL JDBC 驱动已正确添加到项目

### 3. Servlet 找不到问题

解决方案：

- 检查 web.xml 配置是否正确
- 确认 Servlet 类路径和名称是否匹配
- 重启 Tomcat 服务器

### 4. Velocity 模板不解析问题

解决方案：

- 确认 Velocity 库已正确添加
- 检查 Servlet 中是否正确转发到.vm 文件
- 确认 Tomcat 支持 Velocity 模板解析

## 学习建议

### 1. 循序渐进

- 先从简单的登录功能开始
- 逐步添加复杂功能
- 每完成一个功能就进行测试

### 2. 多实践

- 反复练习数据库操作
- 熟悉 JSP 语法和 Servlet 开发
- 多写 SQL 查询语句

### 3. 理解原理

- 理解 HTTP 请求响应过程
- 掌握 JDBC 工作原理
- 理解会话管理机制

通过按照这个流程书逐步学习和实践，初学者可以掌握老旧保险系统的开发技能，为将来的工作打下坚实基础。
